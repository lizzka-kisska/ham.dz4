<!DOCTYPE html>
<html>
    <head>
        <title>–ùamming code‚ú®üå∏üêùüçì</title>
        <script>
            function code(){
                let message = document.getElementById('inputData').value; //—Ç–æ —á—Ç–æ –∑–∞–ø–∏—Å–∞–Ω–æ –≤ —ç—Ç–æ–π —è—á–µ–π–∫–µ
                let i;
                let flag = false;
                for (i=0; i<message.length; i++) {
                    if (Number(message[i])>1){
                        flag = true;
                        break;
                    }
                }
                if (flag==true)
                    document.getElementById('codedData').value = 'wrong digit(s), try again';
                else if (message.length != 4) {
                    document.getElementById('codedData').value = 'wrong number, try again';
                }
                else{
                function num(x, y, z){
                    return String((Number(message[x])+Number(message[y])+Number(message[z]))%2);  
                }
                message += num(0, 1, 3) + num(0, 2, 3) + num(1, 2, 3);
                document.getElementById('codedData').value = message;
                }
            }

            function decode(){
                let num = 0;
                let text = document.getElementById('codedData').value;
                let flag1 = true, flag2 = true, flag3 = true;
                if ((Number(text[0])+Number(text[1])+Number(text[3]))%2 != Number(text[4]))
                    flag1 = false;
                if ((Number(text[0])+Number(text[2])+Number(text[3]))%2 != Number(text[5]))
                    flag2 = false;
                if ((Number(text[1])+Number(text[2])+Number(text[3]))%2 != Number(text[6]))
                    flag3 = false;

                if ((flag1==false)&&(flag2==false)&&(flag3==true)){
                    num = 1;
                    text = String(1 - Number(text[0])) + text.substring(1,7);
                }
                else if ((flag1==true)&&(flag2==false)&&(flag3==false)){
                    num = 2;
                    text = text.substring(0,2) + String(1 - Number(text[2])) + text.substring(3,7);
                }
                else if ((flag1==false)&&(flag2==true)&&(flag3==false)){
                    num = 3;
                    text = text.substring(0,1) + String(1 - Number(text[1])) + text.substring(2,7);
                }
                else if ((flag1==false)&&(flag2==false)&&(flag3==false)){
                    num = 4;
                    text = text.substring(0,3) + String(1 - Number(text[3])) + text.substring(4,7);
                }
                else if ((flag1==false)&&(flag2==true)&&(flag3==true)){
                    num = 5;
                    text = text.substring(0,4) + String(1 - Number(text[4])) + text.substring(5,7);
                }
                else if ((flag1==true)&&(flag2==false)&&(flag3==true)){
                    num = 6;
                    text = text.substring(0,5) + String(1 - Number(text[5])) + text.substring(6,7);
                }
                else if ((flag1==true)&&(flag2==true)&&(flag3==false)){
                    num = 7;
                    text = text.substring(0,6) + String(1 - Number(text[6]));
                }
                document.getElementById('decodedData').value = text.substring(0,4) + ", err bit:" + String(num);
                //document.getElementById('decodedData').value = text;

            }
        </script>
    </head>
    <>
        <p> <input type='text' id='inputData'/> input data :* </p>

        <p> <input type='button' onclick='code()' value='cOdE'/> </p>
        <p> <input type='text' id='codedData'/> coded 0_0 </p>

        <p> <input type='button' onclick='decode()' value='DecOdE'/> </p>
        <p> <input type='text' id='decodedData'/> decoded ^-^ </p>

    </body>
</html>